# طرح بهبود رابط کاربری مدیریت گزارشات (Admin)

با توجه به توضیحات دقیق شما، ساختار فعلی (Category -> Item -> SubItem) از نظر دیتابیس و لاجیک صحیح است، اما رابط کاربری (UI) برای مدیریت سلسله‌مراتبی و استفاده از مقادیر پیش‌فرض می‌تواند بهبود یابد تا دقیقاً مشابه خواسته شما باشد.

## اهداف
۱. **بهبود نمایش سلسله‌مراتبی**: تفکیک واضح‌تر سطوح (دسته‌بندی، آیتم، زیر‌دسته/فیلد).
۲. **مدیریت زیر‌دسته‌ها (Fields)**: امکان تعریف صریح «فیلدها» برای هر آیتم، شامل نام فیلد و مقدار پیش‌فرض.
۳. **تایید عملکرد**: اطمینان از اینکه مقادیر پیش‌فرض تعریف شده در ادمین، در فرم گزارش‌دهی به درستی استفاده می‌شوند.

## تغییرات پیشنهادی

### ۱. بازطراحی `ReportConfigManager.tsx`
به جای نمایش همه چیز در یک صفحه شلوغ، از یک ساختار "Master-Detail" پیشرفته‌تر یا "Drill-down" استفاده می‌کنیم:
*   **ستون اول**: لیست دسته‌بندی‌ها (Categories). با کلیک روی هر دسته، ستون دوم به‌روز می‌شود.
*   **ستون دوم**: لیست آیتم‌های آن دسته (Items). با کلیک روی هر آیتم، ستون سوم (یا مودال) برای مدیریت زیر‌دسته‌ها باز می‌شود.
*   **مدیریت زیر‌دسته‌ها (Sub-Items / Fields)**:
    *   نمایش لیست زیر‌دسته‌های آیتم انتخاب شده.
    *   امکان افزودن/ویرایش زیر‌دسته با فیلدهای: `Title` (نام فیلد), `DefaultValue` (متن پیش‌فرض), `Order`, `IsActive`.

### ۲. اصلاح `NursingReportForm.tsx` (تایید عملکرد)
کد فعلی از `defaultValue` برای مقداردهی اولیه استفاده می‌کند. این منطق صحیح است. فقط باید مطمئن شویم که وقتی کاربر چک‌باکس یک زیر‌دسته را می‌زند، متن پیش‌فرض آن (`DefaultValue`) به درستی در textarea مربوطه قرار می‌گیرد و نهایتاً در متن گزارش تجمیع می‌شود. (کد فعلی این کار را انجام می‌دهد، اما بازبینی می‌کنیم).

## مراحل اجرا
1.  **Frontend**: آپدیت `ReportConfigManager.tsx` برای پشتیبانی بهتر از ۳ سطح (Category -> Item -> SubItem) با UI تمیزتر.
2.  **تست**: اطمینان از اینکه افزودن یک "زیر‌دسته" با "مقدار پیش‌فرض" به درستی کار می‌کند و در فرم گزارش نمایش داده می‌شود.

این تغییرات باعث می‌شود ادمین دقیقاً همان فلو (Flow) که مد نظر شماست را تجربه کند: ورود به دسته -> مدیریت آیتم -> مدیریت فیلدهای آیتم.
