# پلن پیاده‌سازی سیستم آزمون‌ساز هوشمند و تطبیق پرستار-بیمار

این ماژول به ادمین امکان تعریف فرم‌های ارزیابی (برای پرستاران و بیماران) را می‌دهد و با استفاده از پاسخ‌های داده شده، هوشمندترین تطبیق را بین نیازهای بیمار و مهارت‌های پرستار پیشنهاد می‌کند.

## ۱. لایه دامین (Domain) - طراحی موجودیت‌ها

موجودیت‌های جدید برای مدیریت فرم‌ها، سوالات و پاسخ‌ها ایجاد خواهند شد:

### موجودیت‌های اصلی:

1. **AssessmentForm (فرم ارزیابی):**

   * عنوان و توضیحات

   * نوع فرم (مخصوص پرستار، مخصوص بیمار/سالمند، یا فرم خاص)

   * وضعیت (فعال/غیرفعال)

2. **AssessmentQuestion (سوالات ارزیابی):**

   * متن سوال

   * **نوع سوال (QuestionType):**

     * چهار گزینه‌ای (MultipleChoice)

     * پاسخ کوتاه (ShortAnswer)

     * دو گزینه‌ای (Boolean/Binary)

     * پاسخ بلند (LongAnswer)

   * **گزینه‌ها (Options):** لیست گزینه‌ها (برای سوالات چندگزینه‌ای) به فرمت JSON.

   * **تگ‌های تطبیق (MatchingTags):** کلمات کلیدی برای الگوریتم هوشمند (مثلاً "تزریقات", "شیفت\_شب", "سالمند\_آلزایمری").

3. **AssessmentSubmission (پاسخنامه):**

   * ارتباط با `User` (برای پرستار) یا `CareRecipient` (برای بیمار).

   * تاریخ ثبت.

   * امتیاز کلی (محاسبه شده).

4. **QuestionAnswer (پاسخ سوال):**

   * ارتباط با پاسخنامه و سوال.

   * مقدار پاسخ (SelectedOptionId یا TextValue).

   * هر سوال امتیاز خاص خود را دارد

## ۲. لایه کاربرد (Application) - سرویس‌ها و منطق

پیاده‌سازی DTOها و سرویس‌های مورد نیاز:

### سرویس‌ها:

1. **IAssessmentService:**

   * ساخت و ویرایش فرم‌ها و سوالات (CRUD).

   * دریافت فرم فعال برای کاربر.

   * ثبت پاسخنامه کاربر.

2. **IMatchingService (موتور پیشنهاد دهنده هوشمند):**

   * **الگوریتم تطبیق:** مقایسه تگ‌های نیازهای بیمار (استخراج شده از پاسخ‌های بیمار) با تگ‌های مهارت پرستار.

   * محاسبه **درصد شباهت (Compatibility Score)**.

   * مثال: اگر بیمار در سوال "نیاز به تزریقات دارد؟" گزینه "بله" را زده باشد، سیستم پرستارانی که در سوال "مهارت تزریقات دارید؟" گزینه "بله" زده‌اند را فیلتر و اولویت‌بندی می‌کند.

## ۳. لایه زیرساخت (Infrastructure)

* آپدیت `ApplicationDbContext` برای اضافه کردن جداول جدید.

* تنظیم روابط (Relationships) بین جداول.

## ۴. لایه API - اندپوینت‌ها

کنترلر جدید `AssessmentsController` و `MatchingController`:

* `POST /api/assessments/forms`: ایجاد فرم جدید (ادمین).

* `GET /api/assessments/forms/{type}`: دریافت فرم برای پر کردن.

* `POST /api/assessments/submit`: ثبت پاسخ‌ها.

* `GET /api/matching/recommend/{patientId}`: دریافت لیست پرستاران پیشنهادی برای یک بیمار خاص به ترتیب امتیاز.

## مراحل اجرایی (گام‌به‌گام):

1. ایجاد Entityها و Enumهای مربوطه در لایه Domain.
2. اعمال Migration و آپدیت دیتابیس.
3. ساخت DTOها و Interfaceها در لایه Application.
4. پیاده‌سازی سرویس‌ها و لاجیک تطبیق در لایه Application/Infrastructure.
5. ساخت کنترلرها و تست API.

   <br />

مدیریت آزمون ساز باید در نوار کناری پنل ادمین باشد
